---
title: ⏣ Omni CLI
description: Your conduit to the universe
---

import { ProductOverview } from "@/components/docs";
import app from "@/lib/config/app.config";
import { FaTerminal, FaRocket, FaCog, FaServer } from "react-icons/fa";
import { SiRust } from "react-icons/si";

<ProductOverview
  tags={[
    {
      label: "CLI",
      icon: <FaTerminal />,
      className: "bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300",
    },
    {
      label: "TUI",
      icon: <FaTerminal />,
      className: "bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300",
    },
    {
      label: "HTTP API",
      icon: <FaServer />,
      className: "bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",
    },
    {
      label: "Rust",
      icon: <SiRust />,
      className: "bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300",
    },
  ]}
  links={[
    {
      href: "https://cli.omni.dev",
      label: "Visit Website",
      type: "website",
    },
    {
      href: `${app.socials.github}/cli`,
      label: "Visit Repository",
      type: "repository",
    },
  ]}
  alerts={[
    {
      title: "Early Development",
      description:
        "Omni CLI is in early development. Expect this documentation to evolve.",
    },
  ]}
/>

## Overview

**Your conduit to the universe.**

Omni CLI is an agentic CLI for the Omni ecosystem. It provides three interfaces:

- **CLI**: Traditional command-line interface for scripting and automation
- **TUI**: Interactive terminal user interface for visual workflows
- **HTTP API**: RESTful API for remote access and integrations

## Installation

```bash
# From source
git clone https://github.com/omnidotdev/cli
cd cli
cargo build --release

# Binary will be at target/release/omni
```

## Quick Start

### TUI Mode (Default)

Launch the interactive terminal interface:

```bash
omni
# or explicitly
omni tui
```

### Shell Mode

Convert natural language to shell commands:

```bash
omni "list files by size"
# → Command: ls -lhS
# Execute? [y/N]
```

Safe commands auto-execute; others require confirmation. Use `-y` to skip confirmation or `-n` for dry-run:

```bash
omni -y "show disk usage"     # Auto-execute
omni -n "delete temp files"   # Show command only
```

### Agent Mode

Execute agentic tasks directly:

```bash
omni agent "summarize the README in this directory"
omni a "what files are in src/"  # 'a' is an alias for 'agent'
```

### HTTP API Mode

Start the API server for remote access:

```bash
omni serve
# Starts on http://127.0.0.1:7890

# Bind to all interfaces (for LAN/phone access)
omni serve --host 0.0.0.0 --port 7890
```

## Modes

Omni CLI supports two operating modes that control what actions the agent can take:

| Mode | Description | Permissions |
|------|-------------|-------------|
| **Build** | Full access for implementation | Read, write, edit files; run commands |
| **Plan** | Read-only exploration for planning | Read files; run read-only commands |

Switch modes in the TUI with `Tab` or slash commands:

```
/plan   # Switch to plan mode
/build  # Switch to build mode
```

## TUI Interface

The TUI provides a rich interactive experience with:

### Slash Commands

| Command | Description |
|---------|-------------|
| `/clear` | Clear conversation history |
| `/exit`, `/quit` | Exit the application |
| `/model` | Show available models |
| `/model <name>` | Switch to a specific model |
| `/plan` | Switch to plan mode |
| `/build` | Switch to build mode |
| `/sessions` | Open session browser |

### Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| `Enter` | Send message |
| `Shift+Enter` or `Alt+Enter` | Insert newline |
| `Tab` | Toggle mode (Build/Plan) |
| `Ctrl+C` | Cancel streaming / Clear input / Exit |
| `Ctrl+L` | Clear conversation |
| `Ctrl+S` | Open session list |
| `Ctrl+A` | Move cursor to start |
| `Ctrl+E` | Move cursor to end |
| `Ctrl+U` | Delete to start of line |
| `Ctrl+K` | Delete to end of line |
| `Ctrl+W` | Delete word |
| `PageUp/Down` | Scroll messages |
| `Esc` | Dismiss dropdown / Clear input |

### Permission Dialogs

When the agent needs to perform sensitive operations (file writes, shell commands), a permission dialog appears:

- `[a]` Allow once
- `[s]` Always allow (for session)
- `[d]` Deny
- `Esc` Cancel (deny)

## HTTP API Reference

### Endpoints

| Method | Path | Auth | Description |
|--------|------|------|-------------|
| `GET` | `/health` | No | Health check |
| `POST` | `/api/agent` | Yes | Execute an agentic task |
| `POST` | `/api/agent/stream` | Yes | Execute with SSE streaming |
| `GET` | `/api/history` | Yes | Get task execution history |
| `GET` | `/api/docs` | No | Swagger UI documentation |

### Execute Agent Task

```bash
curl -X POST http://localhost:7890/api/agent \
  -H "Content-Type: application/json" \
  -d '{"prompt": "What is 2+2?"}'
```

Response:

```json
{
  "success": true,
  "output": "2 + 2 = 4"
}
```

### Streaming Response (SSE)

```bash
curl -X POST http://localhost:7890/api/agent/stream \
  -H "Content-Type: application/json" \
  -d '{"prompt": "Explain quantum computing"}'
```

Events are sent as Server-Sent Events:

```
data: {"type":"text","content":"Quantum computing..."}
data: {"type":"text","content":" uses qubits..."}
data: {"type":"done"}
```

## Configuration

View or locate your configuration:

```bash
omni config show    # Display current config
omni config path    # Show config file location
```

### Global Configuration

Location: `~/.config/omni/cli/config.toml`

```toml
[agent]
provider = "anthropic"
model = "claude-sonnet-4-20250514"
max_tokens = 8192
persona = "orin"
default_agent = "build"

[api]
host = "127.0.0.1"
port = 7890
# token = "omni_..."  # Generate with: omni config generate-token

[tui]
mouse = true
tips = true
```

### Project Configuration

Create `.omni/config.toml` in your project directory to override global settings:

```toml
[agent]
model = "claude-opus-4-20250514"  # Use Opus for this project
```

Project config merges with global config (project settings take precedence).

### Provider Configuration

Omni CLI supports multiple providers:

```toml
[agent.providers.anthropic]
type = "anthropic"
api_key_env = "ANTHROPIC_API_KEY"

[agent.providers.openai]
type = "openai"
api_key_env = "OPENAI_API_KEY"

[agent.providers.ollama]
type = "openai"
base_url = "http://localhost:11434/v1"
# No API key needed for local Ollama
```

Switch providers by changing `agent.provider`:

```toml
[agent]
provider = "ollama"
model = "llama3"
```

### Permission Presets

Configure default permission behavior per agent:

```toml
[agent.agents.build]
description = "Full access for implementation"

[agent.agents.build.permissions]
edit = "ask"        # ask, allow, deny
write = "ask"
bash_write = "ask"
bash_read = "allow"
read = "allow"
web_search = "ask"
code_search = "ask"

[agent.agents.plan]
description = "Read-only exploration for planning"

[agent.agents.plan.permissions]
edit = "deny"
write = "deny"
bash_write = "deny"
bash_read = "allow"
read = "allow"
```

## Authentication

For remote access (outside localhost), enable API authentication to prevent unauthorized access.

### Generate a Token

```bash
omni config generate-token
```

This outputs a secure token like `omni_a1b2c3d4...`. Add it to your config:

```toml
[api]
token = "omni_a1b2c3d4..."
```

Or set via environment variable:

```bash
export OMNI_API_TOKEN="omni_a1b2c3d4..."
```

### Using the Token

All protected API endpoints require the `Authorization` header:

```bash
curl -X POST http://localhost:7890/api/agent \
  -H "Authorization: Bearer omni_a1b2c3d4..." \
  -H "Content-Type: application/json" \
  -d '{"prompt": "What is 2+2?"}'
```

Without a token configured, the API allows unauthenticated access (suitable for localhost-only use).

## Session Management

Omni CLI persists conversation sessions per project.

### List Sessions

```bash
omni session list                # Table format
omni session list --format json  # JSON format
omni session list --limit 10     # Show only 10 most recent
```

### Export Sessions

```bash
omni session export <session-id>                     # JSON to stdout
omni session export <session-id> -f markdown         # Markdown format
omni session export <session-id> -o conversation.md  # Write to file
```

## Available Tools

The agent has access to these tools:

| Tool | Description |
|------|-------------|
| `shell` | Execute shell commands |
| `read_file` | Read file contents |
| `write_file` | Create new files |
| `edit_file` | Modify existing files |
| `glob` | Find files by pattern |
| `grep` | Search file contents |
| `list_dir` | List directory contents |
| `web_search` | Search the web |
| `code_search` | Search for code examples and API docs |
| `web_fetch` | Fetch URL contents |
| `ask_user` | Ask user questions |
| `todo_read` | Read current task list |
| `todo_write` | Create, update, or delete tasks |
| `plan_enter` | Enter plan mode |
| `plan_exit` | Exit plan mode and begin implementation |

## Command Reference

```bash
omni [OPTIONS] [PROMPT] [COMMAND]

Commands:
  agent   Execute an agentic task (alias: a)
  tui     Start the TUI interface
  serve   Start the HTTP API server
  config  Manage configuration
  session Manage sessions

Options:
  -y, --yes       Skip confirmation for all commands
  -n, --dry-run   Show command only, don't execute
  -v, --verbose   Increase logging verbosity
  -h, --help      Print help
  -V, --version   Print version

Config Commands:
  omni config show           Show current configuration
  omni config path           Show config file location
  omni config generate-token Generate a new API token

Session Commands:
  omni session list [--format table|json] [--limit N]
  omni session export <ID> [--format json|markdown] [--output FILE]

Serve Options:
  omni serve [-H, --host HOST] [-p, --port PORT]
```

## Architecture

```
┌─────────────┐  ┌─────────────┐  ┌─────────────┐
│     CLI     │  │     TUI     │  │   HTTP API  │
└──────┬──────┘  └──────┬──────┘  └──────┬──────┘
       │                │                │
       └────────────────┼────────────────┘
                        │
                 ┌──────┴──────┐
                 │    Core     │
                 └─────────────┘
```

All interfaces share the `core` module for business logic, ensuring consistent behavior across CLI, TUI, and API.
